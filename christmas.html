<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>3Dæ—‹è½¬ç²’å­åœ£è¯æ ‘ | æŠ–éŸ³åŒæ¬¾</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px; /* 3Dé€è§†æ•ˆæœ */
        }
        /* 3Dåœ£è¯æ ‘å®¹å™¨ï¼ˆæ ¸å¿ƒæ—‹è½¬ï¼‰ */
        .tree-container {
            position: relative;
            transform-style: preserve-3d;
            animation: rotate 20s linear infinite;
            z-index: 1;
        }
        /* åœ£è¯æ ‘å±‚çº§ï¼ˆç²‰è“æ¸å˜ï¼‰ */
        .tree-layer {
            position: absolute;
            left: 50%;
            transform: translateX(-50%) rotateY(var(--rotate-y)) rotateX(var(--rotate-x));
            width: 0;
            height: 0;
            border-left: var(--w) solid transparent;
            border-right: var(--w) solid transparent;
            border-bottom: var(--h) solid var(--c);
            filter: drop-shadow(0 0 15px var(--c));
            transform-style: preserve-3d;
        }
        /* æ ‘é¡¶æ˜Ÿæ˜Ÿ */
        .star {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: #ffd700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd70088;
            animation: star-glow 2s ease-in-out infinite alternate;
            transform-style: preserve-3d;
        }
        /* æ ‘å¹² */
        .trunk {
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 70px;
            background: #8b4513;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 0 10px #8b4513;
        }
        /* ç²’å­ç”»å¸ƒï¼ˆå…¨å±ï¼‰ */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        /* ç¥ç¦è¯­ï¼ˆé€‚é…æ‰‹æœºï¼‰ */
        .wish {
            position: absolute;
            bottom: 20px;
            color: #fff;
            font-size: clamp(14px, 3vw, 18px);
            text-align: center;
            text-shadow: 0 0 10px #ff69b4, 0 0 20px #87ceeb;
            z-index: 1;
            padding: 0 10px;
        }

        /* æ ¸å¿ƒåŠ¨ç”» */
        @keyframes rotate {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }
        @keyframes star-glow {
            0% { box-shadow: 0 0 10px #ffd700, 0 0 20px #ffd70088; }
            100% { box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700; }
        }

        /* å“åº”å¼é€‚é…ï¼ˆæ‰‹æœº/ç”µè„‘ï¼‰ */
        @media (max-width: 768px) {
            .star { width: 40px; height: 40px; top: -30px; }
            .trunk { width: 20px; height: 60px; bottom: -50px; }
            .tree-container { scale: 0.8; }
        }
        @media (min-width: 1200px) {
            .tree-container { scale: 1.2; }
        }
    </style>
</head>
<body>
    <div class="tree-container" id="tree">
        <div class="star"></div>
        <div class="trunk"></div>
    </div>
    <div class="wish">Merry Christmas ğŸ„ æ„¿ç¾å¥½ä¸ä½ ç›¸ä¼´</div>
    <canvas id="particleCanvas"></canvas>

    <script>
        // 1. ç”Ÿæˆ3Dæ—‹è½¬åœ£è¯æ ‘ï¼ˆç²‰70%+è“30%æ¸å˜ï¼‰
        const tree = document.getElementById('tree');
        const layers = 9; // å±‚æ•°è¶Šå¤šè¶Šé¥±æ»¡
        const pink = '#ff69b4'; // ä¸»ä½“ç²‰è‰²
        const skyBlue = '#87ceeb'; // 30%å¤©ç©ºè“
        const colors = [
            pink, pink, skyBlue, pink, pink, 
            skyBlue, pink, pink, skyBlue
        ]; // 7:3æ¯”ä¾‹åˆ†é…é¢œè‰²

        // åˆ›å»ºåœ£è¯æ ‘å±‚çº§ï¼ˆ3Dç«‹ä½“æ•ˆæœï¼‰
        for (let i = 0; i < layers; i++) {
            const layer = document.createElement('div');
            layer.className = 'tree-layer';
            // åŠ¨æ€è®¡ç®—æ¯å±‚å¤§å°ï¼ˆé€‚é…å±å¹•ï¼‰
            const baseSize = Math.min(window.innerWidth, window.innerHeight) * 0.08;
            const width = (i + 2) * baseSize + 'px';
            const height = (i + 1) * baseSize * 0.8 + 'px';
            // 3Dæ—‹è½¬è§’åº¦ï¼ˆè¥é€ ç«‹ä½“ï¼‰
            const rotateY = (i % 3) * 10 + 'deg';
            const rotateX = (i % 2) * 5 + 'deg';

            layer.style.setProperty('--w', width);
            layer.style.setProperty('--h', height);
            layer.style.setProperty('--c', colors[i]);
            layer.style.setProperty('--rotate-y', rotateY);
            layer.style.setProperty('--rotate-x', rotateX);
            layer.style.bottom = `${i * 20}px`;
            tree.appendChild(layer);
        }

        // 2. ç”Ÿæˆç²‰è“ç²’å­ç‰¹æ•ˆï¼ˆå…¨å±æµåŠ¨ï¼‰
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let w, h;
        let particles = [];

        // é€‚é…ç”»å¸ƒå¤§å°
        function resizeCanvas() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ç²’å­ç±»ï¼ˆç²‰è“æ¸å˜ï¼‰
        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                // éšæœºä½ç½®ï¼ˆè¦†ç›–å…¨å±ï¼‰
                this.x = Math.random() * w;
                this.y = Math.random() * h;
                // å¤§å°ï¼ˆ1-4pxï¼Œè‡ªç„¶åˆ†å¸ƒï¼‰
                this.size = Math.random() * 3 + 1;
                // é€Ÿåº¦ï¼ˆç¼“æ…¢æµåŠ¨ï¼‰
                this.speedX = (Math.random() - 0.5) * 0.8;
                this.speedY = (Math.random() - 0.5) * 0.8;
                // 70%ç²‰è‰² + 30%å¤©ç©ºè“
                this.color = Math.random() > 0.3 
                    ? `rgba(255, 105, 180, ${Math.random() * 0.8 + 0.2})` // ç²‰è‰²
                    : `rgba(135, 206, 235, ${Math.random() * 0.8 + 0.2})`; // å¤©ç©ºè“
                // ç”Ÿå‘½å‘¨æœŸï¼ˆè‡ªåŠ¨é‡ç½®ï¼‰
                this.life = Math.random() * 1000 + 500;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.life--;
                // è¶…å‡ºå±å¹•/ç”Ÿå‘½å‘¨æœŸç»“æŸåˆ™é‡ç½®
                if (this.life <= 0 || this.x < 0 || this.x > w || this.y < 0 || this.y > h) {
                    this.reset();
                }
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                // è½»å¾®å‘å…‰æ•ˆæœ
                ctx.shadowBlur = 5;
                ctx.shadowColor = this.color;
            }
        }

        // åˆå§‹åŒ–ç²’å­ï¼ˆæ•°é‡é€‚é…å±å¹•ï¼‰
        function initParticles() {
            particles = [];
            const count = Math.min(Math.floor(w * h / 800), 1500); // é¿å…æ€§èƒ½é—®é¢˜
            for (let i = 0; i < count; i++) {
                particles.push(new Particle());
            }
        }
        initParticles();

        // ç²’å­åŠ¨ç”»å¾ªç¯
        function animateParticles() {
            ctx.clearRect(0, 0, w, h);
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            requestAnimationFrame(animateParticles);
        }
        animateParticles();

        // çª—å£å˜åŒ–æ—¶é‡ç½®ç²’å­
        window.addEventListener('resize', () => {
            resizeCanvas();
            initParticles();
        });
    </script>
</body>
</html>